// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.26.0
// source: query.sql

package db

import (
	"context"
)

const createExplicitLink = `-- name: CreateExplicitLink :exec
insert into ExplicitLink(leftSet, leftKey, rightSet, rightKey) values (?, ?, ?, ?)
`

type CreateExplicitLinkParams struct {
	Leftset  string
	Leftkey  string
	Rightset string
	Rightkey string
}

func (q *Queries) CreateExplicitLink(ctx context.Context, arg CreateExplicitLinkParams) error {
	_, err := q.db.ExecContext(ctx, createExplicitLink,
		arg.Leftset,
		arg.Leftkey,
		arg.Rightset,
		arg.Rightkey,
	)
	return err
}

const createKnownKey = `-- name: CreateKnownKey :exec
insert into KnownKey(set, value, lastSeen) values (?, ?, ?)
`

type CreateKnownKeyParams struct {
	Set      string
	Value    string
	Lastseen int64
}

func (q *Queries) CreateKnownKey(ctx context.Context, arg CreateKnownKeyParams) error {
	_, err := q.db.ExecContext(ctx, createKnownKey, arg.Set, arg.Value, arg.Lastseen)
	return err
}

const createKnownSet = `-- name: CreateKnownSet :exec
insert into KnownSet(set) values (?) on conflict do nothing
`

func (q *Queries) CreateKnownSet(ctx context.Context, set string) error {
	_, err := q.db.ExecContext(ctx, createKnownSet, set)
	return err
}

const deleteExplicitLink = `-- name: DeleteExplicitLink :exec
delete from ExplicitLink where
    leftSet = ? and
    leftKey = ? and
    rightSet = ? and
    rightKey = ?
`

type DeleteExplicitLinkParams struct {
	Leftset  string
	Leftkey  string
	Rightset string
	Rightkey string
}

func (q *Queries) DeleteExplicitLink(ctx context.Context, arg DeleteExplicitLinkParams) error {
	_, err := q.db.ExecContext(ctx, deleteExplicitLink,
		arg.Leftset,
		arg.Leftkey,
		arg.Rightset,
		arg.Rightkey,
	)
	return err
}

const getExplicitLinks = `-- name: GetExplicitLinks :many
select leftset, leftkey, rightset, rightkey from ExplicitLink
where (leftSet = ?1 and rightSet = ?2) or
    (rightSet = ?2 and leftSet = ?1)
`

type GetExplicitLinksParams struct {
	Leftset  string
	Rightset string
}

func (q *Queries) GetExplicitLinks(ctx context.Context, arg GetExplicitLinksParams) ([]ExplicitLink, error) {
	rows, err := q.db.QueryContext(ctx, getExplicitLinks, arg.Leftset, arg.Rightset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ExplicitLink
	for rows.Next() {
		var i ExplicitLink
		if err := rows.Scan(
			&i.Leftset,
			&i.Leftkey,
			&i.Rightset,
			&i.Rightkey,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getKnownKeyBefore = `-- name: GetKnownKeyBefore :many
select "set", value, lastseen from KnownKey where lastSeen < ?
`

func (q *Queries) GetKnownKeyBefore(ctx context.Context, lastseen int64) ([]KnownKey, error) {
	rows, err := q.db.QueryContext(ctx, getKnownKeyBefore, lastseen)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []KnownKey
	for rows.Next() {
		var i KnownKey
		if err := rows.Scan(&i.Set, &i.Value, &i.Lastseen); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getKnownKeys = `-- name: GetKnownKeys :many
select "set", value, lastseen from KnownKey where set = ?
`

func (q *Queries) GetKnownKeys(ctx context.Context, set string) ([]KnownKey, error) {
	rows, err := q.db.QueryContext(ctx, getKnownKeys, set)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []KnownKey
	for rows.Next() {
		var i KnownKey
		if err := rows.Scan(&i.Set, &i.Value, &i.Lastseen); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getKnownSets = `-- name: GetKnownSets :many
select "set" from KnownSet
`

func (q *Queries) GetKnownSets(ctx context.Context) ([]string, error) {
	rows, err := q.db.QueryContext(ctx, getKnownSets)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []string
	for rows.Next() {
		var set string
		if err := rows.Scan(&set); err != nil {
			return nil, err
		}
		items = append(items, set)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
